(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1434746d"],{"62fc":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-files"}),e._v(" 订单管理\n            ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",staticStyle:{width:"130px"},attrs:{placeholder:"显示全部"},on:{change:e.getShowState},model:{value:e.show_state,callback:function(t){e.show_state=t},expression:"show_state"}},[a("el-option",{key:"0",attrs:{label:"显示全部",value:"0"}}),a("el-option",{key:"1",attrs:{label:"待接单",value:"1"}}),a("el-option",{key:"2",attrs:{label:"已接单",value:"2"}}),a("el-option",{key:"3",attrs:{label:"已完成",value:"3"}}),a("el-option",{key:"4",attrs:{label:"退款单",value:"4"}}),a("el-option",{key:"5",attrs:{label:"申诉单",value:"5"}})],1),a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-left":"30px",width:"500px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search_key_word,callback:function(t){e.search_key_word=t},expression:"search_key_word"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"下单用户"},on:{change:e.getSearchType},slot:"prepend",model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[a("el-option",{attrs:{label:"下单用户",value:"0"}}),a("el-option",{attrs:{label:"产品名称",value:"1"}}),a("el-option",{attrs:{label:"下单时间",value:"2"}}),a("el-option",{attrs:{label:"处理时间",value:"3"}}),a("el-option",{attrs:{label:"联系人",value:"4"}}),a("el-option",{attrs:{label:"出行人",value:"5"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getSearchResult},slot:"append"})],1)],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"multipleTable",attrs:{data:e.tableData,border:""},on:{select:e.handleSelection,"select-all":e.handleSelection}},[a("el-table-column",{attrs:{prop:"user_nickname",label:"下单用户",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"产品名称",width:"240",align:"center"}}),a("el-table-column",{attrs:{prop:"adult_num",label:"成人",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"child_num",label:"儿童",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"little_child_num",label:"儿童",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"link_man",label:"联系人",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ul",e._l(t.row.link_man,(function(t){return a("li",{key:t,staticStyle:{"list-style":"none"}},[e._v("\n                                "+e._s(t.name)+e._s(e.handleSensitive(t.mobile))+"\n                            ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"passenger_ids",label:"出行人",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ul",e._l(t.row.passengers,(function(t){return a("li",{key:t,staticStyle:{"list-style":"none"}},[e._v("\n                                "+e._s(t.name)+e._s(e.handleSensitive(t.mobile))+"\n                            ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"order_time",label:"下单时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(new Date(t.row.order_time).toLocaleString())+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"state",label:"订单状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{style:6===t.row.state?"cursor: pointer":"",attrs:{type:6===t.row.state?"primary":"success"},on:{click:function(a){return e.handleRefund(t.row)}}},[e._v(e._s(e.handleTags(t.row))+"\n                        ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                    ")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                    ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1),a("el-dialog",{attrs:{title:e.handleName,visible:e.editVisible,width:"40%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"成人数量"}},[a("el-input",{on:{change:e.getProNumber},model:{value:e.form.pro_number,callback:function(t){e.$set(e.form,"pro_number",t)},expression:"form.pro_number"}})],1),a("el-form-item",{attrs:{label:"儿童数量"}},[a("el-input",{on:{change:e.getProTitle},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"幼童数量"}},[a("el-input",{on:{change:e.getProvider},model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}})],1),a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{on:{change:e.getProvider},model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)])])},i=[],l=(a("ac6a"),a("7514"),a("a481"),a("7c15")),o={name:"OrderList",data:function(){return{query:{address:"",name:"",pageIndex:1,pageSize:10},show_state:"",editVisible:!1,tableData:[{user_nickname:"ty",title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山",adult_num:"1",child_num:"2",little_child_num:"3",link_man:[{name:"XXX",mobile:"123863474"}],passengers:[{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"}],state:"2",order_time:"2020-06-10 10:22:33"},{user_nickname:"ty",title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山",adult_num:"1",child_num:"2",little_child_num:"3",link_man:[{name:"XXX",mobile:"123863474"}],passengers:[{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"}],state:"2",order_time:"2020-06-10 10:22:33"},{user_nickname:"ty",title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山",adult_num:"1",child_num:"2",little_child_num:"3",link_man:[{name:"XXX",mobile:"123863474"}],passengers:[{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"}],state:"3",order_time:"2020-06-10 10:22:33"},{user_nickname:"ty",title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山",adult_num:"1",child_num:"2",little_child_num:"3",link_man:[{name:"XXX",mobile:"123863474"}],passengers:[{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"}],state:"4",order_time:"2020-06-10 10:22:33"},{user_nickname:"ty",title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山",adult_num:"1",child_num:"2",little_child_num:"3",link_man:[{name:"XXX",mobile:"123863474"}],passengers:[{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"}],state:"5",order_time:"2020-06-10 10:22:33"},{user_nickname:"ty",title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山",adult_num:"1",child_num:"2",little_child_num:"3",link_man:[{name:"XXX",mobile:"123863474"}],passengers:[{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"}],state:"6",order_time:"2020-06-10 10:22:33"},{user_nickname:"ty",title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山",adult_num:"1",child_num:"2",little_child_num:"3",link_man:[{name:"XXX",mobile:"123863474"}],passengers:[{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"},{name:"XXX",mobile:"123863474"}],state:"7",order_time:"2020-06-10 10:22:33"}],pageTotal:10,isLoading:!1,categoryList:[],categoryIdMap:{},handleTitle:"",form:{},searchType:"",search_key_word:"",showType:"normalData",cityList:[],stateList:["待付款","待接单","已接单","已完成","退款申请","取消订单申请","申诉处理"]}},methods:{handleEdit:function(e,t){this.handleName="编辑订单",this.editVisible=!0},handleSensitive:function(e){return e.replace(e.substring(3,7),"****")},handleTags:function(e){return this.stateList[e.state-1]},handleRefund:function(e){var t=this;2==e.state&&this.$confirm("确认接单","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"接受",cancelButtonText:"拒绝"}).then((function(){})).catch((function(e){t.$message({type:"info",message:"cancel"===e?"已拒绝":"已接单"})})),3==e.state&&this.$confirm("发送出团通知","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}).then((function(){})).catch((function(e){t.$message({type:"info",message:"cancel"===e?"已取消":"已发送"})})),5==e.state&&this.$confirm("是否同意退款","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"是",cancelButtonText:"否"}).then((function(){})).catch((function(e){t.$message({type:"info",message:"cancel"===e?"已拒绝退款":"已同意退款"})})),6===e.state&&this.$confirm("是否接受退款申请","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"接受",cancelButtonText:"拒绝"}).then((function(){})).catch((function(e){t.$message({type:"info",message:"cancel"===e?"拒绝退款":"关闭页面"})}))},getShowState:function(e){var t=this;0===parseInt(e)?(this.isLoading=!0,this.getTableData(),this.isLoading=!1):l["a"].searchSpecifiedOrder({attrName:"state",attrValue:e,pageNum:this.query.pageIndex,pageSize:this.query.pageSize}).then((function(e){t.tableData=e.data.orders,t.pageTotal=e.data.total,t.isLoading=!1}))},getTableData:function(){var e=this;this.isLoading=!0;var t=this;l["a"].getOrderList({pageNum:t.query.pageIndex,pageSize:t.query.pageSize}).then((function(t){e.tableData=t.data.orders,e.pageTotal=t.data.total,e.isLoading=!1,console.log(e.form)})).catch((function(e){console.log(e)}))},handleSelection:function(e){console.log(e)},handlePageChange:function(e,t){this.$set(this.query,"pageIndex",e),"normalData"===this.showType?this.getTableData():this.getSearchResult(t,e)},getSearchType:function(e){},getSearchResult:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.query.pageIndex;this.isLoading=!0;var n=["user_nickname","title","order_time","deal_time","linkMan","passenger"],i=this;this.query.pageIndex=1,this.search_key_word?(this.showType="searching",l["a"].searchSpecifiedOrder({attrName:n[this.searchType]||"user_nickname",attrValue:this.search_key_word,pageNum:a,pageSize:i.query.pageSize}).then((function(e){t.tableData=e.data.orders,t.pageTotal=e.data.total,t.isLoading=!1}))):(this.showType="normal",this.$message.error("请输入搜索内容"),this.query.pageIndex=1,this.getTableData(),this.isLoading=!1),console.log(this.showType)},uniArr:function(e){var t=e.reduce((function(e,t){return e.find((function(e){return e.category_con_id==t.category_con_id}))||e.push(t),e}),[]);return t},initCity:function(e){var t=[];return e.forEach((function(e){var a={value:e.id,label:e.city};t.push(a)})),t},pageInit:function(){var e=this;l["a"].getAllCities().then((function(t){200===t.code&&(e.cityList=e.initCity(t.data),localStorage.setItem("cityList",JSON.stringify(e.cityList)))})).catch((function(e){console.log(e)})).then((function(t){e.getTableData()}))}},created:function(){}},s=o,r=(a("9315"),a("2877")),c=Object(r["a"])(s,n,i,!1,null,"68083f80",null);t["default"]=c.exports},7079:function(e,t,a){},9315:function(e,t,a){"use strict";var n=a("7079"),i=a.n(n);i.a}}]);